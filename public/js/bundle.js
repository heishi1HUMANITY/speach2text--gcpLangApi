(()=>{"use strict";const e=new webkitSpeechRecognition;e.lang="ja-JP",e.continuous=!0,e.maxAlternatives=1;const t=document.querySelector("#recog"),n=document.querySelector("#container");let o=!1,c=[];e.addEventListener("result",(e=>{c.push(e.results[e.resultIndex][0].transcript),n.innerHTML="",c.forEach((e=>{const t=document.createElement("p");t.innerText=e+"。",n.appendChild(t)}))})),e.addEventListener("end",(e=>{return t=void 0,o=void 0,i=function*(){const e=c.join("。");c=[];const t=encodeURI(`http://localhost:8080/api/v1/sentiment?text=${e}`);try{const e=yield fetch(t).then((e=>e.json()));console.log(e),n.innerHTML="",e.result.forEach((e=>{const t=document.createElement("p");t.innerText=e.text.content.replace("。","")+"。",e.sentiment.score<=-.25?t.setAttribute("style","color: red;"):e.sentiment.score>=.25&&t.setAttribute("style","color: green;"),n.appendChild(t)}))}catch(e){console.log(e)}},new((r=void 0)||(r=Promise))((function(e,n){function c(e){try{a(i.next(e))}catch(e){n(e)}}function s(e){try{a(i.throw(e))}catch(e){n(e)}}function a(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(c,s)}a((i=i.apply(t,o||[])).next())}));var t,o,r,i})),t.addEventListener("click",(()=>{!0===o?(e.stop(),o=!1,t.innerText="start"):(e.start(),o=!0,t.innerText="stop",n.innerHTML="")}))})();
//# sourceMappingURL=bundle.js.map